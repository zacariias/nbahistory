<!DOCTYPE HTML>
<html>
<head>
<title>NBA History</title>
<meta charset="utf-8">
<meta property="og:title" content="NBAhistory.org" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.nbahistory.org" />
<meta property="og:description" content="A team-by-team visualization of NBA history, created with D3.js." />
<meta property="og:image" content="http://www.nbahistory.org/logo.png" />
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
</head>
<body>
<p id="logos">
<img src="teams/ATL.png" alt="ATL" onclick="showATL();document.getElementById('title').innerHTML='Atlanta Hawks'" />
<img src="teams/BOS.png" alt="BOS" onclick="showBOS();document.getElementById('title').innerHTML='Boston Celtics'" />
<img src="teams/BKN.png" alt="BKN" onclick="showBKN();document.getElementById('title').innerHTML='Brooklyn Nets'" />
<img src="teams/CHA.png" alt="CHA" onclick="showCHA();document.getElementById('title').innerHTML='Charlotte Hornets'" />
<img src="teams/CHI.png" alt="CHI" onclick="showCHI();document.getElementById('title').innerHTML='Chicago Bulls'" />
<img src="teams/CLE.png" alt="CLE" onclick="showCLE();document.getElementById('title').innerHTML='Cleveland Cavaliers'" />
<img src="teams/DET.png" alt="DET" onclick="showDET();document.getElementById('title').innerHTML='Detroit Pistons'" />
<img src="teams/IND.png" alt="IND" onclick="showIND();document.getElementById('title').innerHTML='Indiana Pacers'" />
<img src="teams/MIA.png" alt="MIA" onclick="showMIA();document.getElementById('title').innerHTML='Miami Heat'" />
<img src="teams/MIL.png" alt="MIL" onclick="showMIL();document.getElementById('title').innerHTML='Milwaukee Bucks'" />
<img src="teams/NYK.png" alt="NYK" onclick="showNYK();document.getElementById('title').innerHTML='New York Knicks'" />
<img src="teams/ORL.png" alt="ORL" onclick="showORL();document.getElementById('title').innerHTML='Orlando Magic'" />
<img src="teams/PHI.png" alt="PHI" onclick="showPHI();document.getElementById('title').innerHTML='Philadelphia 76ers'" />
<img src="teams/TOR.png" alt="TOR" onclick="showTOR();document.getElementById('title').innerHTML='Toronto Raptors'" />
<img src="teams/WAS.png" alt="WAS" onclick="showWAS();document.getElementById('title').innerHTML='Washington Wizards'" />
<img src="teams/DAL.png" alt="DAL" onclick="showDAL();document.getElementById('title').innerHTML='Dallas Mavericks'" />
<img src="teams/DEN.png" alt="DEN" onclick="showDEN();document.getElementById('title').innerHTML='Denver Nuggets'" />
<img src="teams/GSW.png" alt="GSW" onclick="showGSW();document.getElementById('title').innerHTML='Golden State Warriors'" />
<img src="teams/HOU.png" alt="HOU" onclick="showHOU();document.getElementById('title').innerHTML='Houston Rockets'" />
<img src="teams/LAC.png" alt="LAC" onclick="showLAC();document.getElementById('title').innerHTML='Los Angeles Clippers'" />
<img src="teams/LAL.png" alt="LAL" onclick="showLAL();document.getElementById('title').innerHTML='Los Angeles Lakers'" />
<img src="teams/MEM.png" alt="MEM" onclick="showMEM();document.getElementById('title').innerHTML='Memphis Grizzlies'" />
<img src="teams/MIN.png" alt="MIN" onclick="showMIN();document.getElementById('title').innerHTML='Minnesota Timberwolves'" />
<img src="teams/NOP.png" alt="NOP" onclick="showNOP();document.getElementById('title').innerHTML='New Orleans Pelicans'" />
<img src="teams/OKC.png" alt="OKC" onclick="showOKC();document.getElementById('title').innerHTML='Oklahoma City Thunder'" />
<img src="teams/PHO.png" alt="PHO" onclick="showPHO();document.getElementById('title').innerHTML='Phoenix Suns'" />
<img src="teams/POR.png" alt="POR" onclick="showPOR();document.getElementById('title').innerHTML='Portland Trail Blazers'" />
<img src="teams/SAC.png" alt="SAC" onclick="showSAC();document.getElementById('title').innerHTML='Sacramento Kings'" />
<img src="teams/SAS.png" alt="SAS" onclick="showSAS();document.getElementById('title').innerHTML='San Antonio Spurs'" />
<img src="teams/UTA.png" alt="UTA" onclick="showUTA();document.getElementById('title').innerHTML='Utah Jazz'" />
</p>
<h1 id="title">Choose a team</h1>
<svg class="regularseason"></svg>
<svg class="srs"></svg>
<svg class="playoffs"></svg>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
<script>
var margin1 = {top:5,right:0,bottom:80,left:180},
    width1 = 1200 - margin1.left - margin1.right
    height1 = 385 - margin1.top - margin1.bottom;
var margin2 = {top:10,right:0,bottom:80,left:180},
    width2 = 1200 - margin2.left - margin2.right
    height2 = 240 - margin2.top - margin2.bottom;
var margin3 = {top:10,right:0,bottom:10,left:180},
    width3 = 1200 - margin3.left - margin3.right
    height3 = 170 - margin3.top - margin3.bottom;
var x = d3.scale
    .ordinal()
    .rangeRoundBands([0,width1],0.2);
var y1 = d3.scale
    .linear()
    .domain([0,1])
    .range([height1,0]);
var y2 = d3.scale
    .linear()
    .domain([-15,15])
    .range([height2,0]);
var y3 = d3.scale
    .linear()
    .domain([0,1])
    .range([height3,0]);
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");
var formatDecimal = d3.format(".3f");
var y1Axis = d3.svg.axis()
    .scale(y1)
    .orient("left")
    .innerTickSize(-width1)
    .tickPadding(10)
    .tickFormat(formatDecimal);
var formatDecimal = d3.format(".0f");
var y2Axis = d3.svg.axis()
    .scale(y2)
    .orient("left")
    .innerTickSize(-width2)
    .tickPadding(10)
    .tickFormat(formatDecimal);
var y3Axis = d3.svg.axis()
    .scale(y3)
    .orient("left")
    .innerTickSize(-width3)
    .tickPadding(10)
    .ticks(5)
    .tickFormat(function(d){
        if(d==0){return "Missed playoffs"}
        else if(d==0.2){return "Lost first round"}
        else if(d==0.4){return "Lost conf/div semis"}
        else if(d==0.6){return "Lost conf/div finals"}
        else if(d==0.8){return "Lost finals"}
        else{return "Won finals"}});
var regularseason = d3.select(".regularseason")
    .attr("width",width1 + margin1.left + margin1.right)
    .attr("height",height1 + margin1.top + margin1.bottom)
    .append("g")
    .attr("transform","translate(" + margin1.left + "," + margin1.top + ")");
var srs = d3.select(".srs")
    .attr("width",width2 + margin2.left + margin2.right)
    .attr("height",height2 + margin2.top + margin2.bottom)
    .append("g")
    .attr("transform","translate(" + margin2.left + "," + margin2.top + ")");
var playoffs = d3.select(".playoffs")
    .attr("width",width3 + margin3.left + margin3.right)
    .attr("height",height3 + margin3.top + margin3.bottom)
    .append("g")
    .attr("transform","translate(" + margin3.left + "," + margin3.top + ")");
var div = d3.select("body").append("div")
    .attr("class", "tooltip")
    .style("opacity", 0);
var tip = d3.tip()
    .attr('class', 'd3-tip')
    .offset([-20, 0])
    .html(function(d) {
        return "Season: <span>" + d.season + "</span><br />Team: <span>" + d.team + "</span><br />Arena: <span>" + d.arena + "</span><br />Coach: <span>" + d.coach + "</span><br />Win share leader: <span>" + d.topWS + "</span>";});
var tip2 = d3.tip()
    .attr('class', 'd3-tip')
    .offset([-20, 0])
    .html(function(d) {
        if(d.playoffs==1){return "Defeated <span>" + d.opponent + "</span>"}
        else{return "Defeated by <span>" + d.opponent + "</span>";}});
regularseason.append("g")
    .attr("class","y axis")
    .call(y1Axis);
regularseason.append("text")
    .attr("class", "label1")
    .attr("transform","rotate(-90)")
    .attr("x", 0 - (height1 / 2))
    .attr("y", 0 - (margin1.left / 2))
    .style("text-anchor","middle")
    .text("Win percentage");
regularseason.append("text")
    .attr("transform","rotate(-90)")
    .attr("x", 0 - (height1 / 2) + d3.select('.label1').node().getComputedTextLength()/2 + 15)
    .attr("y", 0 - (margin1.left / 2))
    .style("text-anchor","middle")
    .html("&#9432;")
    .style("cursor","pointer")
    .on("mouseover",function(d){
        div.transition()
        .duration(200)
        .style("opacity", .9);
        div	.html("Regular season win percentage; bar label is number of wins")
        .style("left", (d3.event.pageX + 20) + "px")
        .style("top", (d3.event.pageY) + "px");
    })
    .on("mouseout", function(d) {
        div.transition()
        .duration(200)
        .style("opacity", 0);
    });
srs.append("g")
    .attr("class","y axis")
    .call(y2Axis);
playoffs.append("g")
    .attr("class","y axis")
    .call(y3Axis);
srs.append("text")
    .attr("class", "label2")
    .attr("transform","rotate(-90)")
    .attr("x", 0 - (height2 / 2))
    .attr("y", 0 - (margin2.left / 2))
    .style("text-anchor","middle")
    .text("Margin of victory");
srs.append("text")
    .attr("transform","rotate(-90)")
    .attr("x", 0 - (height2 / 2) + d3.select('.label2').node().getComputedTextLength()/2 + 15)
    .attr("y", 0 - (margin2.left / 2))
    .style("text-anchor","middle")
    .style("cursor","pointer")
    .html("&#9432;")
    .on("mouseover",function(d){
        div.transition()
        .duration(200)
        .style("opacity", .9);
        div	.html("Average margin of victory, adjusted for strength of opponent")
        .style("left", (d3.event.pageX + 20) + "px")
        .style("top", (d3.event.pageY) + "px");
    })
    .on("mouseout",function(d){
        div.transition()
        .duration(200)
        .style("opacity", 0);
    });
regularseason.call(tip);
playoffs.call(tip2);
function showATL(){d3.csv("teams/ATL.csv",type,update)}
function showBKN(){d3.csv("teams/BKN.csv",type,update)}
function showBOS(){d3.csv("teams/BOS.csv",type,update)}
function showCHA(){d3.csv("teams/CHA.csv",type,update)}
function showCHI(){d3.csv("teams/CHI.csv",type,update)}
function showCLE(){d3.csv("teams/CLE.csv",type,update)}
function showDAL(){d3.csv("teams/DAL.csv",type,update)}
function showDEN(){d3.csv("teams/DEN.csv",type,update)}
function showDET(){d3.csv("teams/DET.csv",type,update)}
function showGSW(){d3.csv("teams/GSW.csv",type,update)}
function showHOU(){d3.csv("teams/HOU.csv",type,update)}
function showIND(){d3.csv("teams/IND.csv",type,update)}
function showLAC(){d3.csv("teams/LAC.csv",type,update)}
function showLAL(){d3.csv("teams/LAL.csv",type,update)}
function showMEM(){d3.csv("teams/MEM.csv",type,update)}
function showMIA(){d3.csv("teams/MIA.csv",type,update)}
function showMIL(){d3.csv("teams/MIL.csv",type,update)}
function showMIN(){d3.csv("teams/MIN.csv",type,update)}
function showNOP(){d3.csv("teams/NOP.csv",type,update)}
function showNYK(){d3.csv("teams/NYK.csv",type,update)}
function showOKC(){d3.csv("teams/OKC.csv",type,update)}
function showORL(){d3.csv("teams/ORL.csv",type,update)}
function showPHI(){d3.csv("teams/PHI.csv",type,update)}
function showPHO(){d3.csv("teams/PHO.csv",type,update)}
function showPOR(){d3.csv("teams/POR.csv",type,update)}
function showSAC(){d3.csv("teams/SAC.csv",type,update)}
function showSAS(){d3.csv("teams/SAS.csv",type,update)}
function showTOR(){d3.csv("teams/TOR.csv",type,update)}
function showUTA(){d3.csv("teams/UTA.csv",type,update)}
function showWAS(){d3.csv("teams/WAS.csv",type,update)}
function update(error, data) {
x.domain(data.map(function(d){return d.season;}));
regularseason.select(".x.axis").remove();
regularseason.select(".y.axis").remove();
regularseason.selectAll(".label").remove();
playoffs.selectAll("text").remove();
playoffs.select(".y.axis").remove();
srs.select(".x.axis").remove();
srs.select(".y.axis").remove();
regularseason.append("g")
    .attr("class","y axis")
    .call(y1Axis);
srs.append("g")
    .attr("class","y axis")
    .call(y2Axis);
playoffs.append("g")
    .attr("class","y axis")
    .call(y3Axis);
regularseason.append("g")
    .attr("class","x axis")
    .attr("transform","translate(0," + height1 + ")")
    .call(xAxis)
    .selectAll("text")
    .style("text-anchor","start")
    .attr("dx", -70)
    .attr("dy", -5)
    .attr("transform","rotate(-90)");
regularseason.append('g')
    .selectAll('text')
    .data(data)
    .enter()
    .append('text')
    .attr("class","label")
    .attr({'x':function(d,i){return x(d.season)+x.rangeBand()/2;},'y':function(d,i){return height1;}})
    .transition()
    .duration(750)
    .ease("quad")
    .attr({'x':function(d,i){return x(d.season)+x.rangeBand()/2;},'y':function(d,i){return y1(d.winpercent)-5;}})
    .text(function(d,i){return d.wins;})
    .style("text-anchor","middle");
regularseason.selectAll(".bar1").remove();
regularseason.selectAll(".bar1")
    .data(data)
    .enter()
    .append("rect")
    .attr("class","bar1")
    .attr("x",function(d){return x(d.season);})
    .attr("y",height1)
    .attr("height",0)
    .style("fill","white")
    .style("opacity","0")
    .transition()
    .duration(750)
    .ease("quad")
    .attr("y",function(d){return y1(d.winpercent);})
    .attr("height",function(d){return height1 - y1(d.winpercent);})
    .attr("width",x.rangeBand())
    .style("fill",function(d){return d.color1})
    .style("opacity","1");
regularseason.selectAll(".invisible").remove();
regularseason.selectAll(".invisible")
    .data(data)
    .enter()
    .append("rect")
    .attr("class","invisible")
    .attr("x",function(d){return x(d.season);})
    .attr("y",function(d){return y1(d.winpercent);})
    .attr("height",function(d){return height1 - y1(d.winpercent);})
    .attr("width",x.rangeBand())
    .style("fill","white")
    .style("opacity","0")
    .style("cursor","pointer")
    .on('mouseover', function(d) {tip.show(d); d3.select(this).style("opacity", "0.4");})
    .on('mouseout', function(d) {tip.hide(d); d3.select(this).style("opacity", "0");});
srs.append("g")
    .attr("class","x axis")
    .attr("transform","translate(0," + height2 + ")")
    .call(xAxis)
    .selectAll("text")
    .style("text-anchor","start")
    .attr("dx", -70)
    .attr("dy", -5)
    .attr("transform","rotate(-90)");
srs.selectAll(".bar2").remove();
srs.selectAll(".bar2")
    .data(data)
    .enter()
    .append("rect")
    .attr("class","bar2")
    .attr("x",function(d){return x(d.season);})
    .attr("y",height2 / 2)
    .attr("height",0)
    .style("fill","white")
    .style("opacity","0")
    .transition()
    .duration(750)
    .ease("quad")
    .attr("y",function(d){return y2(Math.max(0, d.srs));})
    .attr("height",function(d){return Math.abs(y2(d.srs) - y2(0));})
    .attr("width",x.rangeBand())
    .style("fill",function(d){return d.color2})
    .style("opacity","1");
playoffs.selectAll(".bar3").remove();
playoffs.selectAll(".bar3")
    .data(data)
    .enter()
    .append("rect")
    .attr("x",function(d){return x(d.season);})
    .attr("y",height3)
    .attr("height",0)
    .style("fill","white")
    .style("opacity","0")
    .transition()
    .duration(750)
    .ease("quad")
    .attr("y",function(d){return y3(d.playoffs);})
    .attr("height",function(d){return height3 - y3(d.playoffs);})
    .attr("class","bar3")
    .attr("width",x.rangeBand())
    .style("fill",function(d){return d.color2})
    .style("opacity","1");
playoffs.selectAll(".invisible").remove();
playoffs.selectAll(".invisible")
    .data(data)
    .enter()
    .append("rect")
    .attr("class","invisible")
    .attr("x",function(d){return x(d.season);})
    .attr("y",function(d){return y3(d.playoffs);})
    .attr("height",function(d){return height3 - y3(d.playoffs);})
    .attr("width",x.rangeBand())
    .style("fill","white")
    .style("opacity","0")
    .style("cursor","pointer")
    .on('mouseover', function(d) {tip2.show(d); d3.select(this).style("opacity", "0.4");})
    .on('mouseout', function(d) {tip2.hide(d); d3.select(this).style("opacity", "0");});
}
function type(d){d.winpercent = +d.winpercent;return d;};
</script>
<p id="credit">
<span>Created using <a href="http://d3js.org">D3.js</a></span>
<span>Hosted on <a href="https://github.com/zach4618/nbahistory">GitHub</a></span>
<span>Data from <a href="http://www.basketball-reference.com">Basketball Reference</a></span>
</p>
</body>
</html>
